
matrix:
  fast_finish: true
  sudo: true
  include:
    - language: c
      dist: focal
      script:
        - ./configure --with-target=debug && sudo make wsi
    - language: c
      dist: focal
      script:
        - ./configure --with-target=release && sudo make wsi
    - language: c
      dist: focal
      script:
        - sudo apt install libtcc-dev
        - ./configure --with-target=release --enable-jit && sudo make fix-libtcc wsi
    - language: c
      dist: focal
      script:
        - sudo apt install libtcc-dev
        - ./configure --with-target=coverage --enable-jit && sudo make fix-libtcc wsi test
      after_success:
        - bash <(curl -s https://codecov.io/bash)
  cache: apt
